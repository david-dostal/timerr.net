{"version":3,"sources":["alarm.js"],"names":["_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","prototype","_classCallCheck","instance","TypeError","AlarmState","freeze","ENABLED","DISABLED","Alarm","onFinished","targetTime","onRemainingUpdated","arguments","undefined","_targetTime","_state","_timerId","_remainingTimerId","value","_finished","disable","setTarget","time","enable","_this","setTimeout","remaining","setInterval","clearTimeout","Date","getTime","getState"],"mappings":"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","file":"alarm.js","sourcesContent":["'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar AlarmState = Object.freeze({\n    ENABLED: 'ENABLED',\n    DISABLED: 'DISABLED'\n});\n\nvar Alarm = function () {\n    function Alarm(onFinished, targetTime) {\n        var onRemainingUpdated = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n        _classCallCheck(this, Alarm);\n\n        this.onFinished = onFinished;\n        this._targetTime = targetTime;\n        this.onRemainingUpdated = onRemainingUpdated;\n        this._state = AlarmState.DISABLED;\n        this._timerId = null;\n        this._remainingTimerId = null;\n    }\n\n    _createClass(Alarm, [{\n        key: '_finished',\n        value: function _finished() {\n            this.disable();\n            this.onFinished();\n        }\n    }, {\n        key: 'setTarget',\n        value: function setTarget(time) {\n            this._targetTime = time;\n        }\n    }, {\n        key: 'enable',\n        value: function enable() {\n            var _this = this;\n\n            var time = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this._targetTime;\n\n            if (this._state === AlarmState.DISABLED) {\n                this._state = AlarmState.ENABLED;\n                this.setTarget(time);\n                this._timerId = setTimeout(function () {\n                    return _this._finished();\n                }, this.remaining());\n                this.onRemainingUpdated();\n                this._remainingTimerId = setInterval(function () {\n                    return _this.onRemainingUpdated();\n                }, 1000);\n            }\n        }\n    }, {\n        key: 'disable',\n        value: function disable() {\n            this._state = AlarmState.DISABLED;\n            clearTimeout(this._timerId);\n            clearTimeout(this._remainingTimerId);\n        }\n    }, {\n        key: 'remaining',\n        value: function remaining() {\n            return this.targetTime() - new Date().getTime();\n        }\n    }, {\n        key: 'targetTime',\n        value: function targetTime() {\n            return this._targetTime;\n        }\n    }, {\n        key: 'getState',\n        value: function getState() {\n            return this._state;\n        }\n    }]);\n\n    return Alarm;\n}();\n//# sourceMappingURL=alarm.js.map"]}