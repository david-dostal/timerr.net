{"version":3,"sources":["timer-gui.js"],"names":["stopwatchElement","startButtonElement","resetButtonElement","formElement","hoursInput","minutesInput","secondsInput","timer","Timer","timerTick","timerCompleted","document","addEventListener","event","getElementById","LocalStorage","hasValue","saveTimerTime","loadTimerTime","NumberInput","onclick","startClick","resetClick","updateUi","getTime","remaining","getState","TimerState","STOPPED","startTimer","PAUSED","resume","innerText","RUNNING","pause","inputsValid","freezeInputs","_ref","parseInt","value","h","m","s","start","toMilliseconds","_LocalStorage$tryLoad","tryLoad","reset","time","trySave","unfreezeInputs","setTimeout","alert","millis","Math","round","_decomposeTime","decomposeTime","_","toString","padStart","valid","validity","reportValidity","setAttribute","removeAttribute"],"mappings":"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","file":"timer-gui.js","sourcesContent":["'use strict';\n\nvar stopwatchElement = void 0;\nvar startButtonElement = void 0;\nvar resetButtonElement = void 0;\nvar formElement = void 0;\n\nvar hoursInput = void 0;\nvar minutesInput = void 0;\nvar secondsInput = void 0;\n\nvar timer = new Timer(1000, timerTick, 2 * 60 * 1000, timerCompleted);\n\ndocument.addEventListener(\"DOMContentLoaded\", function (event) {\n    stopwatchElement = document.getElementById('timer-time');\n\n    hoursInput = document.getElementById('hours-input');\n    minutesInput = document.getElementById('minutes-input');\n    secondsInput = document.getElementById('seconds-input');\n    startButtonElement = document.getElementById('button-start');\n    resetButtonElement = document.getElementById('button-reset');\n    formElement = document.getElementById('timer-time');\n\n    if (!LocalStorage.hasValue('timer-start-time')) {\n        saveTimerTime();\n    }\n    loadTimerTime();\n\n    new NumberInput(hoursInput);\n    new NumberInput(minutesInput);\n    new NumberInput(secondsInput);\n\n    startButtonElement.onclick = startClick;\n    resetButtonElement.onclick = resetClick;\n\n    updateUi(timer.getTime());\n});\n\nfunction timerTick(remaining) {\n    updateUi(remaining);\n}\n\nfunction startClick() {\n    switch (timer.getState()) {\n        case TimerState.STOPPED:\n            startTimer();\n            break;\n        case TimerState.PAUSED:\n            timer.resume();\n            startButtonElement.innerText = 'Pause';\n            break;\n        case TimerState.RUNNING:\n            timer.pause();\n            startButtonElement.innerText = 'Resume';\n            break;\n    }\n}\n\nfunction startTimer() {\n    if (inputsValid()) {\n        freezeInputs();\n        var _ref = [parseInt(hoursInput.value), parseInt(minutesInput.value), parseInt(secondsInput.value)],\n            h = _ref[0],\n            m = _ref[1],\n            s = _ref[2];\n\n        saveTimerTime();\n        timer.start(toMilliseconds(h, m, s));\n        startButtonElement.innerText = 'Pause';\n    }\n}\n\nfunction loadTimerTime() {\n    if (LocalStorage.hasValue('timer-start-time')) {\n        var _LocalStorage$tryLoad = LocalStorage.tryLoad('timer-start-time'),\n            h = _LocalStorage$tryLoad.h,\n            m = _LocalStorage$tryLoad.m,\n            s = _LocalStorage$tryLoad.s;\n\n        timer.reset(toMilliseconds(h, m, s));\n    }\n}\n\nfunction saveTimerTime() {\n    var time = { h: parseInt(hoursInput.value), m: parseInt(minutesInput.value), s: parseInt(secondsInput.value) };;\n    LocalStorage.trySave('timer-start-time', time);\n}\n\nfunction resetClick() {\n    timer.reset();\n    updateUi(timer.getTime());\n    startButtonElement.innerText = 'Start';\n    unfreezeInputs();\n}\n\nfunction timerCompleted() {\n    setTimeout(function () {\n        alert('Time is up!');\n        resetClick();\n    }, 1); // Timeout needed to give time to the browser to re-render before the alert is shown.\n}\n\nfunction updateUi(millis) {\n    millis = Math.round(millis / 1000) * 1000;\n\n    var _decomposeTime = decomposeTime(millis),\n        h = _decomposeTime.h,\n        m = _decomposeTime.m,\n        s = _decomposeTime.s,\n        _ = _decomposeTime._;\n\n    hoursInput.value = h.toString().padStart(2, '0');\n    minutesInput.value = m.toString().padStart(2, '0');\n    secondsInput.value = s.toString().padStart(2, '0');\n}\n\nfunction inputsValid() {\n    var valid = hoursInput.validity.valid && minutesInput.validity.valid && secondsInput.validity.valid;\n    if (!valid) {\n        formElement.reportValidity();\n    }\n    return valid;\n}\n\nfunction freezeInputs() {\n    hoursInput.setAttribute('readonly', '');\n    minutesInput.setAttribute('readonly', '');\n    secondsInput.setAttribute('readonly', '');\n}\n\nfunction unfreezeInputs() {\n    hoursInput.removeAttribute('readonly');\n    minutesInput.removeAttribute('readonly');\n    secondsInput.removeAttribute('readonly');\n}\n//# sourceMappingURL=timer-gui.js.map"]}