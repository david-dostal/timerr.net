{"version":3,"sources":["timer-gui.js"],"names":["stopwatchElement","startButtonElement","resetButtonElement","formElement","hoursInput","minutesInput","secondsInput","timer","Timer","timerTick","timerCompleted","document","addEventListener","event","getElementById","localStorage","getItem","saveTimerTime","_JSON$parse","JSON","parse","h","m","s","reset","toMilliseconds","NumberInput","onclick","startClick","resetClick","updateUi","getTime","remaining","getState","TimerState","STOPPED","startTimer","PAUSED","resume","innerText","RUNNING","pause","inputsValid","freezeInputs","_ref","parseInt","value","start","_ref2","setItem","stringify","unfreezeInputs","setTimeout","alert","millis","Math","round","_decomposeTime","decomposeTime","_","toString","padStart","valid","validity","reportValidity","setAttribute","removeAttribute"],"mappings":"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","file":"timer-gui.js","sourcesContent":["'use strict';\n\nvar stopwatchElement = void 0;\nvar startButtonElement = void 0;\nvar resetButtonElement = void 0;\nvar formElement = void 0;\n\nvar hoursInput = void 0;\nvar minutesInput = void 0;\nvar secondsInput = void 0;\n\nvar timer = new Timer(1000, timerTick, 2 * 60 * 1000, timerCompleted);\n\ndocument.addEventListener(\"DOMContentLoaded\", function (event) {\n    stopwatchElement = document.getElementById('timer-time');\n\n    hoursInput = document.getElementById('hours-input');\n    minutesInput = document.getElementById('minutes-input');\n    secondsInput = document.getElementById('seconds-input');\n    startButtonElement = document.getElementById('button-start');\n    resetButtonElement = document.getElementById('button-reset');\n    formElement = document.getElementById('timer-time');\n\n    if (localStorage && localStorage.getItem('timer-start-time') === null) {\n        saveTimerTime();\n    }\n    if (localStorage) {\n        var _JSON$parse = JSON.parse(localStorage.getItem('timer-start-time')),\n            h = _JSON$parse.h,\n            m = _JSON$parse.m,\n            s = _JSON$parse.s;\n\n        timer.reset(toMilliseconds(h, m, s));\n    }\n\n    new NumberInput(hoursInput);\n    new NumberInput(minutesInput);\n    new NumberInput(secondsInput);\n\n    startButtonElement.onclick = startClick;\n    resetButtonElement.onclick = resetClick;\n\n    updateUi(timer.getTime());\n});\n\nfunction timerTick(remaining) {\n    //console.log(decomposeTime(remaining));\n    updateUi(remaining);\n}\n\nfunction startClick() {\n    switch (timer.getState()) {\n        case TimerState.STOPPED:\n            startTimer();\n            break;\n        case TimerState.PAUSED:\n            timer.resume();\n            startButtonElement.innerText = 'Pause';\n            break;\n        case TimerState.RUNNING:\n            timer.pause();\n            startButtonElement.innerText = 'Resume';\n            break;\n    }\n}\n\nfunction startTimer() {\n    if (inputsValid()) {\n        freezeInputs();\n        var _ref = [parseInt(hoursInput.value), parseInt(minutesInput.value), parseInt(secondsInput.value)],\n            h = _ref[0],\n            m = _ref[1],\n            s = _ref[2];\n\n        saveTimerTime();\n        timer.start(toMilliseconds(h, m, s));\n        startButtonElement.innerText = 'Pause';\n    }\n}\n\nfunction saveTimerTime() {\n    if (localStorage) {\n        var _ref2 = [parseInt(hoursInput.value), parseInt(minutesInput.value), parseInt(secondsInput.value)],\n            h = _ref2[0],\n            m = _ref2[1],\n            s = _ref2[2];\n\n        localStorage.setItem('timer-start-time', JSON.stringify({ h: h, m: m, s: s }));\n    }\n}\n\nfunction resetClick() {\n    timer.reset();\n    updateUi(timer.getTime());\n    startButtonElement.innerText = 'Start';\n    unfreezeInputs();\n}\n\nfunction timerCompleted() {\n    setTimeout(function () {\n        alert('Time is up!');\n        resetClick();\n    }, 1); // Timeout needed to give time to the browser to re-render before the alert is shown.\n}\n\nfunction updateUi(millis) {\n    //console.log(millis);\n    millis = Math.round(millis / 1000) * 1000;\n\n    var _decomposeTime = decomposeTime(millis),\n        h = _decomposeTime.h,\n        m = _decomposeTime.m,\n        s = _decomposeTime.s,\n        _ = _decomposeTime._;\n\n    hoursInput.value = h.toString().padStart(2, '0');\n    minutesInput.value = m.toString().padStart(2, '0');\n    secondsInput.value = s.toString().padStart(2, '0');\n}\n\nfunction inputsValid() {\n    var valid = hoursInput.validity.valid && minutesInput.validity.valid && secondsInput.validity.valid;\n    if (!valid) {\n        formElement.reportValidity();\n    }\n    return valid;\n}\n\nfunction freezeInputs() {\n    hoursInput.setAttribute('readonly', '');\n    minutesInput.setAttribute('readonly', '');\n    secondsInput.setAttribute('readonly', '');\n}\n\nfunction unfreezeInputs() {\n    hoursInput.removeAttribute('readonly');\n    minutesInput.removeAttribute('readonly');\n    secondsInput.removeAttribute('readonly');\n}\n//# sourceMappingURL=timer-gui.js.map"]}