{"version":3,"sources":["alarm-gui.min.js"],"names":["alarm","enableButton","hoursInput","minutesInput","remainingElement","formElement","document","addEventListener","a","getElementById","LocalStorage","hasValue","saveAlarmTarget","NumberInput","onclick","enableClick","Alarm","alarmFinished","getInputTime","updateRemaining","alert","Date","targetTime","toLocaleTimeString","innerText","unfreezeInputs","formatRemaining","remaining","f","g","Math","round","c","decomposeTime","e","h","m","d","s","b","ms","loadAlarmTarget","tryLoad","value","toString","padStart","parseInt","trySave","getState","AlarmState","DISABLED","inputsValid","freezeInputs","enable","ENABLED","disable","validity","valid","reportValidity","getFullYear","getMonth","getDate","getTime","setAttribute","removeAttribute"],"mappings":"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","file":"alarm-gui.min.js","sourcesContent":["\"use strict\";\n\nvar alarm = void 0;var enableButton = void 0;var hoursInput = void 0;var minutesInput = void 0;var remainingElement = void 0;var formElement = void 0;document.addEventListener(\"DOMContentLoaded\", function (a) {\n  enableButton = document.getElementById(\"button-enable\");hoursInput = document.getElementById(\"hours-input\");minutesInput = document.getElementById(\"minutes-input\");remainingElement = document.getElementById(\"remaining-time\");formElement = document.getElementById(\"timer-time\");if (!LocalStorage.hasValue(\"alarm-target-time\")) {\n    saveAlarmTarget();\n  }loadAlarmTarget();new NumberInput(hoursInput);new NumberInput(minutesInput);enableButton.onclick = enableClick;alarm = new Alarm(function () {\n    return alarmFinished();\n  }, getInputTime(), function () {\n    return updateRemaining();\n  });\n});function alarmFinished() {\n  alert(\"Beep Beep! It's \" + new Date(alarm.targetTime()).toLocaleTimeString() + \".\");enableButton.innerText = \"Enable\";unfreezeInputs();\n}function updateRemaining() {\n  remainingElement.innerText = formatRemaining(alarm.remaining());\n}function formatRemaining(f) {\n  var g = Math.round(f / (1000 * 60)) * 1000 * 60;var c = decomposeTime(g),\n      e = c.h,\n      a = c.m,\n      d = c.s,\n      b = c.ms;return e + \"h \" + a + \"m remaining\";\n}function loadAlarmTarget() {\n  if (LocalStorage.hasValue(\"alarm-target-time\")) {\n    var c = LocalStorage.tryLoad(\"alarm-target-time\"),\n        b = c.h,\n        a = c.m;hoursInput.value = b.toString().padStart(2, \"0\");minutesInput.value = a.toString().padStart(2, \"0\");\n  }\n}function saveAlarmTarget() {\n  var a = { h: parseInt(hoursInput.value), m: parseInt(minutesInput.value) };LocalStorage.trySave(\"alarm-target-time\", a);\n}function enableClick() {\n  switch (alarm.getState()) {case AlarmState.DISABLED:\n      if (inputsValid()) {\n        freezeInputs();saveAlarmTarget();alarm.enable(getInputTime());enableButton.innerText = \"Disable alarm\";\n      }break;case AlarmState.ENABLED:\n      alarm.disable();unfreezeInputs();enableButton.innerText = \"Enable alarm\";remainingElement.innerText = \"\";break;}\n}function inputsValid() {\n  var a = hoursInput.validity.valid && minutesInput.validity.valid;if (!a) {\n    formElement.reportValidity();\n  }return a;\n}function getInputTime() {\n  var e = parseInt(hoursInput.value);var a = parseInt(minutesInput.value);var c = new Date();var b = new Date(c.getFullYear(), c.getMonth(), c.getDate(), e, a, 0);if (b.getTime() > c.getTime()) {\n    return b.getTime();\n  } else {\n    var d = 24 * 60 * 60 * 1000;return b.getTime() + d;\n  }\n}function freezeInputs() {\n  hoursInput.setAttribute(\"readonly\", \"\");minutesInput.setAttribute(\"readonly\", \"\");\n}function unfreezeInputs() {\n  hoursInput.removeAttribute(\"readonly\");minutesInput.removeAttribute(\"readonly\");\n};\n//# sourceMappingURL=alarm-gui.min.js.map\n//# sourceMappingURL=alarm-gui.min.js.map\n//# sourceMappingURL=alarm-gui.min.js.map"]}